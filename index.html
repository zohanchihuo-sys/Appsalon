function copiarResumenCaja(){
  const fecha = $("cajaFiltroFecha").value || todayISO();
  const movs = state.movimientos.filter(m=>m.fecha===fecha);

  const ing = movs.filter(m=>m.tipo==="ingreso").reduce((a,b)=>a+Number(b.monto||0),0);
  const gas = movs.filter(m=>m.tipo==="gasto").reduce((a,b)=>a+Number(b.monto||0),0);
  const net = ing - gas;

  const text =
`ðŸ“Œ Caja del dÃ­a: ${fecha}
âœ… Ingresos: ${money(ing)}
âŒ Gastos: ${money(gas)}
ðŸ’° Neto: ${money(net)}`;

  // âœ… Intento 1: clipboard moderno
  if (navigator.clipboard && window.isSecureContext) {
    navigator.clipboard.writeText(text)
      .then(()=>alert("Resumen copiado âœ… (pegar en WhatsApp)"))
      .catch(()=>fallbackCopy(text));
  } else {
    // âœ… Fallback para Android / no https
    fallbackCopy(text);
  }
}

function fallbackCopy(text){
  // Truco universal: textarea temporal
  const ta = document.createElement("textarea");
  ta.value = text;
  ta.style.position = "fixed";
  ta.style.left = "-9999px";
  ta.style.top = "-9999px";
  document.body.appendChild(ta);
  ta.focus();
  ta.select();

  try{
    const ok = document.execCommand("copy");
    alert(ok ? "Resumen copiado âœ…" : "No se pudo copiar. Te lo muestro para copiar manual:\n\n" + text);
  }catch(e){
    alert("No se pudo copiar. Copia manual:\n\n" + text);
  }finally{
    document.body.removeChild(ta);
  }
}
