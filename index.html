<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Manuel Sal√≥n Pro</title>
    <style>
        :root { --oro: #d4af37; --bg: #0a0a0a; --card: #151515; --texto: #eee; }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--texto); margin: 0; overflow-x: hidden; }

        /* HEADER Y MEN√ö */
        header { background: #000; padding: 15px; display: flex; align-items: center; border-bottom: 2px solid var(--oro); position: sticky; top: 0; z-index: 100; }
        .menu-icon { font-size: 28px; color: var(--oro); cursor: pointer; margin-right: 15px; }
        .brand { color: var(--oro); font-weight: bold; letter-spacing: 2px; text-transform: uppercase; }

        /* NAVEGACI√ìN LATERAL (LAS 3 RAYITAS) */
        .nav-drawer { position: fixed; top: 0; left: -280px; width: 260px; height: 100%; background: #111; z-index: 200; transition: 0.3s; border-right: 1px solid var(--oro); box-shadow: 5px 0 15px rgba(0,0,0,0.5); }
        .nav-drawer.active { left: 0; }
        .nav-item { padding: 18px 25px; border-bottom: 1px solid #222; color: #ccc; display: block; text-decoration: none; font-size: 15px; cursor: pointer; }
        .nav-item:active { background: #222; color: var(--oro); }
        
        /* OVERLAY (PARA CERRAR EL MEN√ö TOCANDO FUERA) */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; z-index: 150; }
        .overlay.active { display: block; }

        /* SECCIONES INDEPENDIENTES */
        .section { display: none; padding: 20px; animation: fadeIn 0.4s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .card { background: var(--card); border-radius: 12px; padding: 15px; border: 1px solid #252525; margin-bottom: 15px; }
        h2 { color: var(--oro); font-size: 1.1rem; margin-top: 0; border-bottom: 1px solid #333; padding-bottom: 10px; }

        /* BOTONES Y ESTILOS DE PRUEBA */
        .btn-test { background: var(--oro); color: #000; border: none; padding: 12px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <header>
        <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>
        <div class="brand">MANUEL SAL√ìN</div>
    </header>

    <div class="overlay" id="overlay" onclick="toggleMenu()"></div>

    <nav class="nav-drawer" id="drawer">
        <div style="padding:30px 20px; text-align:center; background:#000;">
            <b style="color:var(--oro); font-size:1.2rem;">MEN√ö PRINCIPAL</b>
        </div>
        <div class="nav-item" onclick="showSection('inicio')">üè† Inicio</div>
        <div class="nav-item" onclick="showSection('agenda')">üìÖ Agenda de Citas</div>
        <div class="nav-item" onclick="showSection('caja-manuel')">üí∞ Caja Manuel</div>
        <div class="nav-item" onclick="showSection('caja-socio')">üí∞ Caja Socio</div>
        <div class="nav-item" onclick="showSection('clientes')">üë• Clientes</div>
        <div class="nav-item" onclick="showSection('ajustes')">‚öôÔ∏è Ajustes</div>
    </nav>

    <main>
        <div id="inicio" class="section active">
            <div class="card">
                <h2>BIENVENIDO</h2>
                <p>Aqu√≠ ver√°s el resumen de hoy.</p>
            </div>
        </div>

        <div id="agenda" class="section">
            <div class="card">
                <h2>AGENDA</h2>
                <p>M√≥dulo de citas (lo instalaremos a continuaci√≥n).</p>
            </div>
        </div>

        <div id="caja-manuel" class="section">
            <div class="card">
                <h2>MI CAJA</h2>
                <p>Tus cobros personales ir√°n aqu√≠.</p>
            </div>
        </div>

        <div id="caja-socio" class="section">
            <div class="card">
                <h2>CAJA SOCIO</h2>
                <p>Los cobros de tu compa√±ero ir√°n aqu√≠.</p>
            </div>
        </div>

        <div id="clientes" class="section">
            <div class="card">
                <h2>CLIENTES</h2>
                <p>Historial y tintes.</p>
            </div>
        </div>

        <div id="ajustes" class="section">
            <div class="card">
                <h2>AJUSTES</h2>
                <p>Configuraci√≥n de nombres y respaldo.</p>
            </div>
        </div>
    </main>

    <script>
                // --- BASE DE DATOS ---
        const DB_CITAS = "MS_CITAS_V2";
        let citas = JSON.parse(localStorage.getItem(DB_CITAS)) || [];
        let diaSeleccionado = new Date().toISOString().split('T')[0];

        // --- L√ìGICA DEL MEN√ö LATERAL ---
        function toggleMenu() {
            document.getElementById('drawer').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        function showSection(id) {
            // Ocultar todas las secciones
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            // Mostrar la que elegiste
            document.getElementById(id).classList.add('active');
            
            // Si entras a Agenda o Inicio, actualizar los datos
            if(id === 'agenda') renderAgenda();
            if(id === 'inicio') renderInicio();
            
            toggleMenu(); // Cerrar men√∫ al elegir
        }

        // --- L√ìGICA DE LA AGENDA ---
        function guardarCita() {
            const n = document.getElementById('a-nom').value;
            const t = document.getElementById('a-tel').value;
            const f = document.getElementById('a-fec').value;
            const h = document.getElementById('a-hor').value;

            if(n && f && h) {
                citas.push({ n, t, f, h, id: Date.now() });
                localStorage.setItem(DB_CITAS, JSON.stringify(citas));
                
                // Limpiar campos
                document.getElementById('a-nom').value = "";
                document.getElementById('a-tel').value = "";
                
                renderAgenda();
                alert("‚úÖ Cita agendada correctamente");
            } else {
                alert("‚ùå Por favor llena Nombre, Fecha y Hora");
            }
        }

        function borrarCita(id) {
            if(confirm("¬øEliminar esta cita?")) {
                citas = citas.filter(c => c.id !== id);
                localStorage.setItem(DB_CITAS, JSON.stringify(citas));
                renderAgenda();
            }
        }

        function renderAgenda() {
            const cal = document.getElementById('calendario'); cal.innerHTML = "";
            const d = new Date(); const ultDay = new Date(d.getFullYear(), d.getMonth()+1, 0).getDate();
            
            // Dibujar Calendario
            for(let i=1; i<=ultDay; i++) {
                let fechaC = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
                let clase = citas.some(c => c.f === fechaC) ? 'has-c' : '';
                let sel = fechaC === diaSeleccionado ? 'sel-d' : '';
                cal.innerHTML += `<div class="cal-d ${clase} ${sel}" onclick="diaSeleccionado='${fechaC}';renderAgenda()">${i}</div>`;
            }

            // Dibujar Lista de Citas
            const list = document.getElementById('lista-citas');
            list.innerHTML = `<h3 style="color:var(--oro); font-size:14px; margin-top:20px;">CITAS DEL D√çA: ${diaSeleccionado}</h3>`;
            
            const filtradas = citas.filter(c => c.f === diaSeleccionado).sort((a,b)=>a.h.localeCompare(b.h));
            
            if(filtradas.length === 0) {
                list.innerHTML += `<p style="color:gray; font-size:12px;">No hay citas para este d√≠a.</p>`;
            }

            filtradas.forEach(c => {
                let waLink = c.t ? `<a href="https://wa.me/${c.t}?text=Hola%20${c.n},%20te%20confirmo%20tu%20cita%20en%20Manuel%20Sal√≥n%20el%20d√≠a%20${c.f}%20a%20las%20${c.h}" target="_blank" class="btn-wa" style="background:#25d366; color:white; text-decoration:none; padding:8px 12px; border-radius:6px; font-size:12px; display:inline-block; margin-top:10px; font-weight:bold;">üì± WhatsApp</a>` : '';
                
                list.innerHTML += `
                    <div class="cita-item" style="background:#1a1a1a; padding:12px; border-radius:10px; margin-top:10px; border-left:4px solid #d4af37; position:relative;">
                        <b style="color:white;">${c.h} hs</b> - <span style="color:#ccc;">${c.n}</span> <br>
                        ${waLink}
                        <button onclick="borrarCita(${c.id})" style="color:#e74c3c; background:none; border:none; position:absolute; right:10px; top:12px; font-weight:bold; cursor:pointer;">‚úï</button>
                    </div>`;
            });
        }

        function renderInicio() {
            const hoy = new Date().toISOString().split('T')[0];
            const totalHoy = citas.filter(c => c.f === hoy).length;
            document.getElementById('resumen-hoy').innerHTML = `Hoy tienes <b style="color:var(--oro); font-size:1.2rem;">${totalHoy}</b> citas agendadas.`;
        }

        // Carga inicial
        renderInicio();
        
    </script>
</body>
</html>
